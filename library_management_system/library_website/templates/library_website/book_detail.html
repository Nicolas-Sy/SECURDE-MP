{% extends "library_website/base.html" %}
{% load restrict_access%}
{% block content %}
    
    	<article class="media content-section">
		  <div class="media-body">
		    <div class="article-metadata">
		    	<div class ="flex-container">
		    		<img class="bookdetail-img" src=" {{book.image.url}}">
				      <h1> {{ book.title }}</h1>
		    	</div>
		    	<br/>
		    	<p><strong>Author:</strong> {{ book.author }}</p> <!-- author detail link not yet defined -->
			    <p><strong>Publisher:</strong> {{ book.publisher }}</p>
			    <p><strong>Year of Publication:</strong> {{ book.year_of_publication }}</p>
			    <p><strong>ISBN:</strong> {{ book.isbn }}</p> 
		        <p class="article-content"><strong> Reviews: </strong> {{ book.reviews }}</p>
		        <br/>	
		 
		     <h4>Copies</h4>
		    {% for copy in book.bookinstance_set.all %}
			      <hr>
			      <p class="{% if copy.status == 'a' %}text-success{% elif copy.status == 'm' %}text-danger{% else %}text-warning{% endif %}">
			        {{ copy.get_status_display }}
			        {% if user.is_authenticated and request.user|has_group:"BookManager" %}
				      <a class="btn btn-secondary btn-sm mt-1 mb-1" href="{% url 'library-update_bookInstance' copy.id %}"> Update </a>
					  <a class="btn btn-danger btn-sm mt-1 mb-1" href="{% url 'library-delete_bookInstance' copy.id %}"> Delete </a>
			  	  {% endif %}
			      </p>
			      {% if copy.status != 'a' %}
			        <p><strong>Due to be returned:</strong> {{ copy.due_back }}</p>
			      	<p><strong>Borrower:</strong> {{copy.borrower}}
			      {% endif %}
			      <p><strong>Imprint:</strong> {{ copy.imprint }}</p>
			      <p class="text-muted"><strong>Id:</strong> {{ copy.id }}</p>
			{% endfor %}
		  </div>
		  {% if user.is_authenticated and request.user|has_group:"BookManager" %}
		      <a class="btn btn-primary btn-sm mt-1 mb-1" href="{% url 'library-create_bookInstance' %}"> Add a Copy </a>
		  {% endif %}
		</article>
{% endblock content %}